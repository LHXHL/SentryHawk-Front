import{d as N,C as R,i as g,m as v,j as S,H as A,c as B,F as I,b as o,a as T,r as n,w as t,u as w,U as z,V as E,W as L,X as q,l as H,I as K,Y as M,o as $,e as k}from"./index-DJShjt1M.js";import{u as j,a as D}from"./tabs-BKZYXxi6.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"login-btn"},X=N({__name:"LoginForm",setup(Y){const y=H(),d=R(),V=j(),b=D(),l=g(),F=v({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),u=g(!1),r=v({username:"",password:""}),m=s=>{s&&s.validate(async e=>{if(e){u.value=!0;try{const{data:i}=await L({...r});d.setToken(i.access_token),d.setUserInfo(i.userInfo),await q(),V.setTabs([]),b.setKeepAliveName([]),y.push(K),M({title:"登录成功!!",message:"欢迎使用无尽藏哨🦅攻击面管理平台",type:"success",duration:3e3})}finally{u.value=!1}}})},x=s=>{s&&s.resetFields()};return S(()=>{document.onkeydown=s=>{if(s.code==="Enter"||s.code==="enter"||s.code==="NumpadEnter"){if(u.value)return;m(l.value)}}}),A(()=>{document.onkeydown=null}),(s,e)=>{const i=n("user"),p=n("el-icon"),c=n("el-input"),_=n("el-form-item"),U=n("lock"),C=n("el-form"),f=n("el-button");return $(),B(I,null,[o(C,{ref_key:"loginFormRef",ref:l,model:r,rules:F,size:"large"},{default:t(()=>[o(_,{prop:"username"},{default:t(()=>[o(c,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=a=>r.username=a),placeholder:"用户名：admin / user"},{prefix:t(()=>[o(p,{class:"el-input__icon"},{default:t(()=>[o(i)]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(_,{prop:"password"},{default:t(()=>[o(c,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=a=>r.password=a),type:"password",placeholder:"密码：123456","show-password":"",autocomplete:"new-password"},{prefix:t(()=>[o(p,{class:"el-input__icon"},{default:t(()=>[o(U)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),T("div",W,[o(f,{icon:w(z),round:"",size:"large",onClick:e[2]||(e[2]=a=>x(l.value))},{default:t(()=>e[4]||(e[4]=[k(" 重置 ")])),_:1},8,["icon"]),o(f,{icon:w(E),round:"",size:"large",type:"primary",loading:u.value,onClick:e[3]||(e[3]=a=>m(l.value))},{default:t(()=>e[5]||(e[5]=[k(" 登录 ")])),_:1},8,["icon","loading"])])],64)}}}),Q=O(X,[["__scopeId","data-v-3a596d07"]]);export{Q as default};
