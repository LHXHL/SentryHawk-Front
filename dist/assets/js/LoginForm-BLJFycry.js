import{d as S,G as U,i as g,m as v,j as C,J as A,c as B,F as T,b as o,a as z,r as n,w as t,u as w,V as E,W as I,X as K,Y as L,l as q,K as M,Z as $,o as j,e as k}from"./index-ICckUsEc.js";import{u as D,a as G}from"./tabs-DrN2de9_.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"login-btn"},O=S({__name:"LoginForm",setup(W){const y=q(),d=U(),V=D(),b=G(),l=g(),F=v({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}),u=g(!1),r=v({username:"",password:""}),m=s=>{s&&s.validate(async e=>{if(e){u.value=!0;try{const{data:i}=await K({...r});d.setToken(i.access_token),d.setUserInfo(i.userInfo),await L(),V.setTabs([]),b.setKeepAliveName([]),y.push(M),$({title:"登录成功!!",message:"欢迎使用无尽藏哨🦅攻击面管理平台",type:"success",duration:3e3})}finally{u.value=!1}}})},x=s=>{s&&s.resetFields()};return C(()=>{document.onkeydown=s=>{if(s.code==="Enter"||s.code==="enter"||s.code==="NumpadEnter"){if(u.value)return;m(l.value)}}}),A(()=>{document.onkeydown=null}),(s,e)=>{const i=n("user"),p=n("el-icon"),c=n("el-input"),_=n("el-form-item"),N=n("lock"),R=n("el-form"),f=n("el-button");return j(),B(T,null,[o(R,{ref_key:"loginFormRef",ref:l,model:r,rules:F,size:"large"},{default:t(()=>[o(_,{prop:"username"},{default:t(()=>[o(c,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=a=>r.username=a),placeholder:"用户名：admin / user"},{prefix:t(()=>[o(p,{class:"el-input__icon"},{default:t(()=>[o(i)]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(_,{prop:"password"},{default:t(()=>[o(c,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=a=>r.password=a),type:"password",placeholder:"密码：123456","show-password":"",autocomplete:"new-password"},{prefix:t(()=>[o(p,{class:"el-input__icon"},{default:t(()=>[o(N)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),z("div",J,[o(f,{icon:w(E),round:"",size:"large",onClick:e[2]||(e[2]=a=>x(l.value))},{default:t(()=>e[4]||(e[4]=[k(" 重置 ")])),_:1},8,["icon"]),o(f,{icon:w(I),round:"",size:"large",type:"primary",loading:u.value,onClick:e[3]||(e[3]=a=>m(l.value))},{default:t(()=>e[5]||(e[5]=[k(" 登录 ")])),_:1},8,["icon","loading"])])],64)}}}),P=H(O,[["__scopeId","data-v-16daff9e"]]);export{P as default};
