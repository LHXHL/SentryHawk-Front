import{d as _,i as u,m as C,r,g as q,o as A,w as l,b as o,D as L,e as f,af as M,aw as P,y as R}from"./index-Bj5Pylhr.js";const D=_({name:"UserDrawer"}),K=_({...D,setup(U,{expose:v}){const i=u(),s=u(!1),e=u({isView:!1,title:"",row:{}});v({acceptParams:a=>{e.value=a,s.value=!0}});const w={children:"children",label:"title"},d=u();(async()=>{const a=await P();d.value=a.data})();const g=C({group_name:[{required:!0,message:"请填写用户名"}],group_menu:[{required:!0,message:"请选择菜单权限"}]}),b=()=>{e.value.row.menus&&i.value.setCheckedKeys(e.value.row.menus,!1)},p=u(),h=()=>{e.value.row.group_menu=i.value.getCheckedKeys(!1),p.value.validate(async a=>{if(a)try{await e.value.api(e.value.row),R.success({message:`${e.value.title}用户成功！`}),e.value.getTableList(),s.value=!1}catch{}})};return(a,t)=>{const y=r("el-input"),m=r("el-form-item"),V=r("el-tree"),k=r("el-form"),c=r("el-button"),x=r("el-drawer");return A(),q(x,{modelValue:s.value,"onUpdate:modelValue":t[2]||(t[2]=n=>s.value=n),"destroy-on-close":!0,size:"450px",title:`${e.value.title}用户组`,onOpen:b},{footer:l(()=>[o(c,{onClick:t[1]||(t[1]=n=>s.value=!1)},{default:l(()=>t[3]||(t[3]=[f("取消")])),_:1}),L(o(c,{type:"primary",onClick:h},{default:l(()=>t[4]||(t[4]=[f("确定")])),_:1},512),[[M,!e.value.isView]])]),default:l(()=>[o(k,{ref_key:"ruleFormRef",ref:p,"label-width":"100px","label-suffix":" :",rules:g,disabled:e.value.isView,model:e.value.row,"hide-required-asterisk":e.value.isView,"label-position":"top"},{default:l(()=>[o(m,{label:"用户组名称",prop:"group_name"},{default:l(()=>[o(y,{modelValue:e.value.row.group_name,"onUpdate:modelValue":t[0]||(t[0]=n=>e.value.row.group_name=n),placeholder:"请填写用户组名称",clearable:""},null,8,["modelValue"])]),_:1}),o(m,{label:"菜单权限",prop:"group_menu"},{default:l(()=>[o(V,{ref_key:"treeRef",ref:i,style:{"max-width":"600px"},data:d.value,"show-checkbox":"","default-expand-all":"","node-key":"path","highlight-current":"",props:w},null,8,["data"])]),_:1})]),_:1},8,["rules","disabled","model","hide-required-asterisk"])]),_:1},8,["modelValue","title"])}}});export{K as _};
