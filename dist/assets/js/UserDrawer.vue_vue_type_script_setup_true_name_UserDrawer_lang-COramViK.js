import{d as V,i as m,m as x,r as t,g as w,o as p,w as r,b as o,c as R,F as C,f as F,D as B,e as c,af as D,y as P}from"./index-ICckUsEc.js";import{g as $}from"./user-Bf4eujp4.js";const E=V({name:"UserDrawer"}),M=V({...E,setup(L,{expose:b}){const u=m(!1),e=m({isView:!1,title:"",row:{}});b({acceptParams:s=>{e.value=s,u.value=!0,s.title==="新增"?i.password[0].required=!0:i.password[0].required=!1}});const f=m();(async()=>{const s=await $();f.value=s.data.list})();const i=x({username:[{required:!0,message:"请填写用户名"}],password:[{required:!1,message:"请填写用户密码"}],phone_num:[{required:!0,message:"请填写手机号码"}],user_group:[{required:!0,message:"请选择用户身份"}],email:[{required:!0,message:"请填写邮箱"}]}),v=m(),g=()=>{v.value.validate(async s=>{if(s)try{await e.value.api(e.value.row),P.success({message:`${e.value.title}用户成功！`}),e.value.getTableList(),u.value=!1}catch{}})};return(s,l)=>{const d=t("el-input"),n=t("el-form-item"),U=t("el-option"),k=t("el-select"),q=t("el-form"),_=t("el-button"),y=t("el-drawer");return p(),w(y,{modelValue:u.value,"onUpdate:modelValue":l[6]||(l[6]=a=>u.value=a),"destroy-on-close":!0,size:"450px",title:`${e.value.title}用户`},{footer:r(()=>[o(_,{onClick:l[5]||(l[5]=a=>u.value=!1)},{default:r(()=>l[7]||(l[7]=[c("取消")])),_:1}),B(o(_,{type:"primary",onClick:g},{default:r(()=>l[8]||(l[8]=[c("确定")])),_:1},512),[[D,!e.value.isView]])]),default:r(()=>[o(q,{ref_key:"ruleFormRef",ref:v,"label-width":"100px","label-suffix":" :",rules:i,disabled:e.value.isView,model:e.value.row,"hide-required-asterisk":e.value.isView},{default:r(()=>[o(n,{label:"用户名",prop:"username"},{default:r(()=>[o(d,{modelValue:e.value.row.username,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value.row.username=a),placeholder:"请填写用户名",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"用户密码",prop:"password"},{default:r(()=>[o(d,{modelValue:e.value.row.password,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.row.password=a),placeholder:"请填写用户密码",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"手机号",prop:"phone_num"},{default:r(()=>[o(d,{modelValue:e.value.row.phone_num,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.row.phone_num=a),placeholder:"请填写手机号码",clearable:""},null,8,["modelValue"])]),_:1}),o(n,{label:"用户组",prop:"user_group"},{default:r(()=>[o(k,{modelValue:e.value.row.user_group,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.row.user_group=a),placeholder:"请选择用户组",clearable:""},{default:r(()=>[(p(!0),R(C,null,F(f.value,a=>(p(),w(U,{key:a.id,label:a.group_name,value:a.group_name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(n,{label:"邮箱",prop:"email"},{default:r(()=>[o(d,{modelValue:e.value.row.email,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.row.email=a),placeholder:"请填写邮箱",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","disabled","model","hide-required-asterisk"])]),_:1},8,["modelValue","title"])}}});export{M as _};
