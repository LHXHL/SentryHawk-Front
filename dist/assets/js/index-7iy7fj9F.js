import{u as k}from"./useHandleData-DW4kA-As.js";import{I,u as h}from"./index-BjdKsW-_.js";import{_ as E}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-D0RK73s3.js";import{_ as H}from"./UserDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-Dwp2WZCh.js";import{d as C,i as u,m as v,r as N,C as R,c as S,o as c,b as r,w as l,u as n,v as V,e as s,n as Y,p as w,D as f,g as b,q as M,s as q,x as F,E as J}from"./index-Bj5Pylhr.js";import{f as T,e as g,B as O,h as j,i as z,a as G}from"./user-DXATE8oe.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./sortable.esm-C83syoBY.js";const K={class:"table-box"},Q=C({name:"useProTable"}),re=C({...Q,setup(W){const o=u(),x=v({type:1}),D=t=>({list:t.list,total:t.total}),L=t=>{let e=JSON.parse(JSON.stringify(t));return e.createTime&&(e.startTime=e.createTime[0]),e.createTime&&(e.endTime=e.createTime[1]),delete e.createTime,G()},$=v([{type:"selection",fixed:"left",width:70},{prop:"id",label:"ID"},{prop:"username",label:"用户姓名",search:{el:"input",tooltip:"我是搜索提示"}},{prop:"phone_num",label:"手机号"},{prop:"email",label:"邮箱"},{prop:"user_group",label:"身份组"},{prop:"createTime",label:"创建时间",width:180,search:{el:"date-picker",span:2,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"},defaultValue:["2022-11-12 11:35:00","2022-12-12 11:35:00"]}},{prop:"operation",label:"操作",fixed:"right",width:330}]),A=async t=>{var e;await k(T,{id:[t.id]},`删除【${t.username}】用户`),(e=o.value)==null||e.getTableList()},B=async t=>{var e,a;await k(T,{id:t},"删除所选用户信息"),(e=o.value)==null||e.clearSelection(),(a=o.value)==null||a.getTableList()},P=async()=>{J.confirm("确认导出用户数据?","温馨提示",{type:"warning"}).then(()=>{var t;return h(g,"用户列表",(t=o.value)==null?void 0:t.searchParam)})},_=u(null),U=()=>{var e,a;const t={title:"用户",tempApi:g,importApi:O,getTableList:(e=o.value)==null?void 0:e.getTableList};(a=_.value)==null||a.acceptParams(t)},y=u(null),m=(t,e={})=>{var p,i;const a={title:t,isView:t==="查看",row:{...e},api:t==="新增"?j:t==="编辑"?z:void 0,getTableList:(p=o.value)==null?void 0:p.getTableList};(i=y.value)==null||i.acceptParams(a)};return(t,e)=>{const a=N("el-button"),p=R("auth");return c(),S("div",K,[r(E,{ref_key:"proTable",ref:o,columns:$,"request-api":L,"init-param":x,"data-callback":D},{tableHeader:l(i=>[f((c(),b(a,{type:"primary",icon:n(M),onClick:e[0]||(e[0]=d=>m("新增"))},{default:l(()=>e[1]||(e[1]=[s("新增用户")])),_:1},8,["icon"])),[[p,"add"]]),f((c(),b(a,{type:"primary",icon:n(q),plain:"",onClick:U},{default:l(()=>e[2]||(e[2]=[s("批量添加用户")])),_:1},8,["icon"])),[[p,"batchAdd"]]),f((c(),b(a,{type:"primary",icon:n(F),plain:"",onClick:P},{default:l(()=>e[3]||(e[3]=[s("导出用户数据")])),_:1},8,["icon"])),[[p,"export"]]),r(a,{type:"danger",icon:n(w),plain:"",disabled:!i.isSelected,onClick:d=>B(i.selectedListIds)},{default:l(()=>e[4]||(e[4]=[s(" 批量删除用户 ")])),_:2},1032,["icon","disabled","onClick"])]),operation:l(i=>[r(a,{type:"primary",link:"",icon:n(V),onClick:d=>m("查看",i.row)},{default:l(()=>e[5]||(e[5]=[s("查看")])),_:2},1032,["icon","onClick"]),r(a,{type:"primary",link:"",icon:n(Y),onClick:d=>m("编辑",i.row)},{default:l(()=>e[6]||(e[6]=[s("编辑")])),_:2},1032,["icon","onClick"]),r(a,{type:"primary",link:"",icon:n(w),onClick:d=>A(i.row)},{default:l(()=>e[7]||(e[7]=[s("删除")])),_:2},1032,["icon","onClick"])]),_:1},8,["columns","init-param"]),r(H,{ref_key:"drawerRef",ref:y},null,512),r(I,{ref_key:"dialogRef",ref:_},null,512)])}}});export{re as default};
