import{u as c}from"./useHandleData-Cn0KCz0Y.js";import{_ as k}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-sBvBigU3.js";import{T as C}from"./index-DMNBHxCI.js";import{I}from"./index-CUze1Xue.js";import{z as b,d as g,i as V,m as d,r as u,c as D,o as N,b as a,a as q,u as s,w as i,p as m,e as f}from"./index-ICckUsEc.js";import{c as A}from"./assets-DIi7FFfH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./sortable.esm-C83syoBY.js";const $=n=>b.post("/getVulnlist/",n),_=n=>b.post("/vuln/delete/",n),j={class:"main-box"},B={class:"table-box"},F=g({name:"useTreeFilter"}),J=g({...F,setup(n){const l=V(),p=d({projectId:""}),v=t=>{l.value.pageable.pageNum=1,p.projectId=t},h=d([{type:"selection",width:50},{prop:"vuln_name",label:"漏洞名称",width:220,search:{el:"input"}},{prop:"target",label:"漏洞目标",width:200,search:{el:"input"}},{prop:"vuln_level",label:"漏洞危害级别",width:130,enum:[{type:"高危"},{type:"中危"},{type:"低危"}],search:{el:"select",props:{filterable:!0}},fieldNames:{label:"type",value:"type"}},{prop:"vuln_from",label:"漏洞来源",width:170},{prop:"editor_time",label:"创建时间",width:170},{prop:"operation",label:"操作",width:210,fixed:"right"}]),y=async t=>{var e;await c(_,{id:[t.id]},`删除【${t.vuln_name}】漏洞`),(e=l.value)==null||e.getTableList()},w=async t=>{var e,o;await c(_,{id:t},"删除所选用户信息"),(e=l.value)==null||e.clearSelection(),(o=l.value)==null||o.getTableList()};return(t,e)=>{const o=u("el-button"),T=u("AssetDialog");return N(),D("div",j,[a(C,{label:"name",title:"单位列表","request-api":s(A),"default-value":p.projectId,onChange:v},null,8,["request-api","default-value"]),q("div",B,[a(k,{ref_key:"proTable",ref:l,columns:h,"request-api":s($),"init-param":p,"search-col":{xs:1,sm:1,md:2,lg:3,xl:3}},{tableHeader:i(r=>[a(o,{type:"danger",icon:s(m),disabled:!r.isSelected,onClick:x=>w(r.selectedListIds)},{default:i(()=>e[0]||(e[0]=[f("批量删除漏洞产")])),_:2},1032,["icon","disabled","onClick"])]),operation:i(r=>[a(o,{type:"primary",link:"",icon:s(m),onClick:x=>y(r.row)},{default:i(()=>e[1]||(e[1]=[f("删除")])),_:2},1032,["icon","onClick"])]),_:1},8,["columns","request-api","init-param"]),a(T,{ref:"DialogRef"},null,512),a(I,{ref:"dialogRef"},null,512)])])}}});export{J as default};
