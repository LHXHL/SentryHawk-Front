import{u as b}from"./useHandleData-DW4kA-As.js";import{I as L,u as h}from"./index-BjdKsW-_.js";import{_ as B}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-D0RK73s3.js";import{T as P}from"./index-ypUc4-rv.js";import $ from"./AssetDialog-DekUywz-.js";import{z as p,d as A,i as m,m as y,r as j,c as q,o as N,b as o,a as R,u as i,w as r,n as E,e as c,p as v,q as F,s as V,x as z,E as H}from"./index-Bj5Pylhr.js";import{c as S}from"./assets-DERgPz2g.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./sortable.esm-C83syoBY.js";const M=a=>p.post("/getAsset_inputlist/",a),O=a=>p.post("/asset_input/add/",a),U=a=>p.post("/asset_input/BatchAdd/",a),G=a=>p.post("/asset_input/edit/",a),w=a=>p.post("/asset_input/delete/",a),J=a=>p.download("/asset_input/downloadAssetInfo/",a),K=a=>p.download("/getAssetAddDemo/",a),Q={class:"main-box"},W={class:"table-box"},X=A({name:"useTreeFilter"}),re=A({...X,setup(a){const n=m(),u=y({projectId:""}),k=t=>{n.value.pageable.pageNum=1,u.projectId=t},T=y([{type:"selection",width:50},{prop:"asset",label:"资产",width:451,search:{el:"input"}},{prop:"asset_type",label:"资产类别",width:100,enum:[{type:"URL"},{type:"Domain"},{type:"IP"}],search:{el:"select",props:{filterable:!0}},fieldNames:{label:"type",value:"type"}},{prop:"asset_editor_time",label:"创建时间",width:170},{prop:"operation",label:"操作",width:210,fixed:"right"}]),x=async t=>{var e;await b(w,{id:[t.id]},`删除【${t.asset}】资产`),(e=n.value)==null||e.getTableList()},C=async t=>{var e,s;await b(w,{id:t},"删除所选用户信息"),(e=n.value)==null||e.clearSelection(),(s=n.value)==null||s.getTableList()},I=async()=>{H.confirm("确认导出资产数据?","温馨提示",{type:"warning"}).then(()=>{var e;const t={...(e=n.value)==null?void 0:e.searchParam,projectId:u.projectId};h(J,"单位资产列表",t)})},f=m(null),D=()=>{var e,s;const t={title:"资产",tempApi:K,importApi:U,getTableList:(e=n.value)==null?void 0:e.getTableList};(s=f.value)==null||s.acceptParams(t)},_=m(null),g=(t,e={})=>{var l,d;const s={title:t,row:{...e},api:t==="新增"?O:t==="编辑"?G:void 0,getTableList:(l=n.value)==null?void 0:l.getTableList};(d=_.value)==null||d.acceptParams(s)};return(t,e)=>{const s=j("el-button");return N(),q("div",Q,[o(P,{label:"name",title:"单位列表","request-api":i(S),"default-value":u.projectId,onChange:k},null,8,["request-api","default-value"]),R("div",W,[o(B,{ref_key:"proTable",ref:n,columns:T,"request-api":i(M),"init-param":u,"search-col":{xs:1,sm:1,md:2,lg:3,xl:3}},{tableHeader:r(l=>[o(s,{type:"primary",icon:i(F),onClick:e[0]||(e[0]=d=>g("新增"))},{default:r(()=>e[1]||(e[1]=[c("新增资产")])),_:1},8,["icon"]),o(s,{type:"primary",icon:i(V),plain:"",onClick:D},{default:r(()=>e[2]||(e[2]=[c("批量添加资产")])),_:1},8,["icon"]),o(s,{type:"primary",icon:i(z),plain:"",onClick:I},{default:r(()=>e[3]||(e[3]=[c("导出资产")])),_:1},8,["icon"]),o(s,{type:"danger",icon:i(v),disabled:!l.isSelected,onClick:d=>C(l.selectedListIds)},{default:r(()=>e[4]||(e[4]=[c("批量删除资产")])),_:2},1032,["icon","disabled","onClick"])]),operation:r(l=>[o(s,{type:"primary",link:"",icon:i(E),onClick:d=>g("编辑",l.row)},{default:r(()=>e[5]||(e[5]=[c("编辑")])),_:2},1032,["icon","onClick"]),o(s,{type:"primary",link:"",icon:i(v),onClick:d=>x(l.row)},{default:r(()=>e[6]||(e[6]=[c("删除")])),_:2},1032,["icon","onClick"])]),_:1},8,["columns","request-api","init-param"]),o($,{ref_key:"DialogRef",ref:_},null,512),o(L,{ref_key:"dialogRef",ref:f},null,512)])])}}});export{re as default};
