import{u as _}from"./useHandleData-X0P66sxs.js";import{_ as j}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-DCAO8Awy.js";import C from"./OrganizationDialog-C0clAs4r.js";import{z as c,d as v,i as f,m as T,r as x,c as L,o as h,a as D,b as l,w as r,u as p,n as P,e as d,p as b,q as $}from"./index-DJShjt1M.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./sortable.esm-C83syoBY.js";const N=a=>c.post("/getProjectList/",a),q=a=>c.post("/project/add/",a),B=a=>c.post("/project/edit/",a),g=a=>c.post("/project/delete/",a),R={class:"main-box"},V={class:"table-box"},z=v({name:"useTreeFilter"}),U=v({...z,setup(a){const s=f(),w=T([{type:"selection",width:50},{prop:"project_name",label:"项目名称",width:282,search:{el:"input"}},{prop:"project_tag",label:"项目类型",width:160,enum:[{id:1,tag:"安服项目"},{id:2,tag:"监测项目"},{id:3,tag:"等保项目"},{id:4,tag:"临时项目"}],search:{el:"select",props:{filterable:!0}},fieldNames:{label:"tag",value:"id"}},{prop:"url_num",label:"URL资产总数",width:170},{prop:"domain_num",label:"Domain资产总数",width:170},{prop:"ip_num",label:"IP资产总数",width:170},{prop:"operation",label:"操作",width:210,fixed:"right"}]),y=async t=>{var e;await _(g,{id:[t.id]},`删除【${t.project_name}】项目`),(e=s.value)==null||e.getTableList()},k=async t=>{var e,o;await _(g,{id:t},"删除所选用户信息"),(e=s.value)==null||e.clearSelection(),(o=s.value)==null||o.getTableList()},u=f(null),m=(t,e={})=>{var n,i;const o={title:t,row:{...e},api:t==="新建"?q:t==="编辑"?B:void 0,getTableList:(n=s.value)==null?void 0:n.getTableList};(i=u.value)==null||i.acceptParams(o)};return(t,e)=>{const o=x("el-button");return h(),L("div",R,[D("div",V,[l(j,{ref_key:"proTable",ref:s,columns:w,"request-api":p(N),"search-col":{xs:1,sm:1,md:2,lg:3,xl:3}},{tableHeader:r(n=>[l(o,{type:"primary",icon:p($),onClick:e[0]||(e[0]=i=>m("新建"))},{default:r(()=>e[1]||(e[1]=[d("新建项目")])),_:1},8,["icon"]),l(o,{type:"danger",icon:p(b),disabled:!n.isSelected,onClick:i=>k(n.selectedListIds)},{default:r(()=>e[2]||(e[2]=[d("批量删除项目")])),_:2},1032,["icon","disabled","onClick"])]),operation:r(n=>[l(o,{type:"primary",link:"",icon:p(P),onClick:i=>m("编辑",n.row)},{default:r(()=>e[3]||(e[3]=[d("编辑")])),_:2},1032,["icon","onClick"]),l(o,{type:"primary",link:"",icon:p(b),onClick:i=>y(n.row)},{default:r(()=>e[4]||(e[4]=[d("删除")])),_:2},1032,["icon","onClick"])]),_:1},8,["columns","request-api"]),l(C,{ref_key:"DialogRef",ref:u},null,512)])])}}});export{U as default};
